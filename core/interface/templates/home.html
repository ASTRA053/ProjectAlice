{% extends 'base.html' %}

{% block title %}
	{{ langData.home }}
{% endblock %}

{% block loaders %}
	<script src="{{ url_for('static', filename='js/widgets.js') }}"></script>
	{% for widgetName, widgetList in widgets.items() %}
		<link rel="stylesheet" href="{{ url_for('IndexView:widget_static', filename=widgetName + '/css/common.css') }}">
		{% for widget in widgetList.values() %}
			{% if (widget.state|int) == 1 %}
				<script src="{{ url_for('IndexView:widget_static', filename=widget.parent + '/js/' + widget.name + '.js') }}"></script>
				<link rel="stylesheet" href="{{ url_for('IndexView:widget_static', filename=widget.parent + '/css/' + widget.name + '.css') }}">
			{% endif %}
		{% endfor %}
	{% endfor %}
	{{ total }}
{% endblock %}

{% block pageTitle %}
	{{ langData.home }}
{% endblock %}

{% block content %}
	<div class="stick-top-right">
		<div class="toolbar" id="toolbar_full" style="display:none;">
			<span class="toolbarButton link-hover" id="cinemaToggle">
				<i class="fas fa-person-booth" aria-hidden="true"></i>
			</span>
			<span class="toolbarButton link-hover" id="configToggle">
				<i class="fas fa-cog" aria-hidden="true"></i>
			</span>
			<span class="toolbarButton link-hover" id="addWidget">
				<i class="fas fa-plus-circle" aria-hidden="true"></i>
			</span>
			<span class="toolbarButton link-hover" id="removeWidget">
				<i class="fas fa-minus-circle" aria-hidden="true"></i>
			</span>
			<span class="toolbarButton link-hover" id="toolbarToggleHide">
				<i class="fas fa-pen-square" aria-hidden="true"></i>
			</span>
		</div>
		<div class="toolbar" id="toolbar_checkmark" style="display:none;">
			<span class="toolbarButton link-hover" id="widgetCheck">
				<i class="fas fa-check-circle" aria-hidden="true"></i>
			</span>
		</div>
		<div class="toolbar" id="toolbar_toggle" style="display:block;">
			<span class="toolbarButton link-hover" id="toolbarToggleShow">
				<i class="fas fa-pen-square" aria-hidden="true"></i>
			</span>
		</div>
	</div>
	<div id="addWidgetDialog" title="{{ langData.addWidgetTitle }}">
		{% for parentName, widgetList in widgets.items() %}
			<div class="addWidgetCategory">
				<div class="addWidgetCategoryTitle">
					{{ parentName }}
				</div>
				<div class="addWidgetList">
					{% for widgetName, widget in widgetList.items() %}
						<div class="addWidgetLine" id="addWidgetLine_{{ widget.parent }}_{{ widget.name }}" {% if (widget.state|int) == 0 %}style="display: block;" {% else %} style="display: none;"{% endif %}>
							<div class="addWidgetName">{{ widgetName }}</div>
							<div class="addWidgetCheck link-hover"><i class="fas fa-check-circle" aria-hidden="true"></i></div>
						</div>
					{% endfor %}
				</div>
			</div>
		{% endfor %}
	</div>
	<div class="widgetsPane">
		{% for parentName, widgetList in widgets.items() %}
			{% for widgetName, widget in widgetList.items() %}
				{% if (widget.state|int) == 1 %}
					<div class="widget {{ widget.size }}" id="{{ widget.parent }}_{{ widget.name }}" style="position: relative;  top: {{ widget.y }}px; left: {{ widget.x }}px;
							{% if widget.width > 0 %}width: {{widget.width}}px;{% endif %}
							{%  if widget.height > 0 %} height:{{widget.height}}px;{% endif %}
							z-index: {{ widget.zindex }}">
						{{ widget.html()|safe }}
						<div class="widgetDelete widgetButton button initialHidden">
							<i class="fas fa-minus-circle" aria-hidden="true"></i>
						</div>
						<div class="widgetConfig widgetButton button initialHidden">
							<i class="fas fa-cog" aria-hidden="true"></i>
						</div>
					</div>
				{% endif %}
			{% endfor %}
		{% endfor %}
	</div>
	<div id="config_tabs" class="widgetOptions">
		<div class="tabsContainer" id="widgetConfTabContainer">
			<ul>
				<li class="tab activeTab" data-for="WidgetSettings">Widget Einstellungen</li>
				<li class="tab" data-for="GraphicSettings">Anzeige Einstellungen</li>
			</ul>
			<div class="tabsContent">
				<div class="tabPage" id="WidgetSettings">
				</div>
				<div class="tabPage" id="GraphicSettings">
					Coming soon!
				</div>
			</div>
		</div>
	</div>
{% endblock %}
